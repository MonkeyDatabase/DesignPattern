## 问题场景

1. 在一套智能家居设备中有智能照明系统、智能风扇、智能冰箱、智能洗衣机、扫地机器人、智能音箱等设备
2. 目前想要通过在手机上安装app来控制这些家电
3. 但是这些智能家居设备来自于不同的厂商，它们的厂商为了形成自己的壁垒而只维护自己的生态，但是对于用户来说，并不想针对每一家智能设备安装一个App，用户只想通过一个App就可以控制各个生态。
4. 要实现一个App控制，需要各个厂商的都要提供一个统一的接口给App使用，如果能达到这个条件，就可以使用Command模式
5. Command模式将动作的请求者从动作的执行者中解耦出来
6. 在本场景中，动作的请求者是App，动作的执行者是各个智能家居

## Command vs Facade

1. Facade模式中，是将各个设备的功能封装到一个函数中，通过一次调用控制被调用方法中聚合的多个家电
2. Command模式中，是将动作的请求者从动作的执行者中解耦，发起的一次请求只会影响到这次请求接收的设备

## Command模式概念

1. 在软件开发中，我们经常需要向某些对象发送请求，但是并不知道请求的接收者是谁，也不知道请求的操作是哪个
2. 在程序执行过程中，可以由其他部件指定具体的请求接收者
3. 命令模式使得请求发送者与请求接收者消除彼此之间的耦合，让对象之间的调用关系更加灵活，实现解耦
4. 命令模式中，将一个请求封装为一个对象，以便使用不同的参数表示不同的命令，同时命令模式也支持可撤销的操作
5. 将军发布命令、士兵去执行，其中士兵可能是一个军团的所有士兵，将军无法记住所有的士兵，而且士兵可能有轮岗，每次接受命令的可能不是固定的人，需要每次命令当前轮岗的人，所以通过传令来将两者关联起来
6. Invoker是调用者，Receiver是被调用者 MyCommand是命令，MyCommand实现了Command接口并且它持有接收对象

## Command模式uml

1. Command抽象类，它有*execute()* 和*undo()* 方法，所有的命令都在它的内部
2. ConcreteCommand实现了Command接口
3. Receiver是执行者，它有*action()* 方法
4. ConcreteCommand聚合了Receiver
5. Invoker是调用者，它聚合了Command接口的子对象
6. 通过Command和ConcreteCommand的桥梁，解除了Invoker和Receiver之间的耦合
